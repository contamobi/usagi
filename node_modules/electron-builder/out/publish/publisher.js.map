{
  "version": 3,
  "file": "publisher.js",
  "sourceRoot": "",
  "sources": [
    "../../src/publish/publisher.ts"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "import { BuildInfo } from \"../packagerApi\"\nimport { PublishConfiguration, GithubOptions, S3Options, BintrayOptions, GenericServerOptions } from \"electron-builder-http/out/publishOptions\"\n\nexport async function getResolvedPublishConfig(packager: BuildInfo, publishConfig: PublishConfiguration, errorIfCannot: boolean): Promise<PublishConfiguration | null> {\n  if (publishConfig.provider === \"generic\") {\n    if ((<GenericServerOptions>publishConfig).url == null) {\n      throw new Error(`Please specify \"url\" for \"generic\" update server`)\n    }\n    return publishConfig\n  }\n\n  if (publishConfig.provider === \"s3\") {\n    if ((<S3Options>publishConfig).bucket == null) {\n      throw new Error(`Please specify \"bucket\" for \"s3\" update server`)\n    }\n    return publishConfig\n  }\n\n  async function getInfo() {\n    const info = await packager.repositoryInfo\n    if (info != null) {\n      return info\n    }\n\n    if (!errorIfCannot) {\n      return null\n    }\n\n    throw new Error(`Cannot detect repository by .git/config. Please specify \"repository\" in the package.json (https://docs.npmjs.com/files/package.json#repository).\\nPlease see https://github.com/electron-userland/electron-builder/wiki/Publishing-Artifacts`)\n  }\n\n  let owner = publishConfig.owner\n  let project = publishConfig.provider === \"github\" ? (<GithubOptions>publishConfig).repo : (<BintrayOptions>publishConfig).package\n  if (!owner || !project) {\n    const info = await getInfo()\n    if (info == null) {\n      return null\n    }\n\n    if (!owner) {\n      owner = info.user\n    }\n    if (!project) {\n      project = info.project\n    }\n  }\n\n  const copy: PublishConfiguration = Object.assign({}, publishConfig)\n  if (copy.owner == null) {\n    copy.owner = owner\n  }\n\n  if (publishConfig.provider === \"github\") {\n    const options = <GithubOptions>copy\n    if (options.repo == null) {\n      options.repo = project\n    }\n    return options\n  }\n  else if (publishConfig.provider === \"bintray\") {\n    const options = <BintrayOptions>copy\n    if (options.package == null) {\n      options.package = project\n    }\n    return options\n  }\n  else {\n    return null\n  }\n}\n\nexport function getCiTag() {\n  const tag = process.env.TRAVIS_TAG || process.env.APPVEYOR_REPO_TAG_NAME || process.env.CIRCLE_TAG || process.env.CI_BUILD_TAG\n  return tag != null && tag.length > 0 ? tag : null\n}"
  ]
}
